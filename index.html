<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGO Weight Calculator</title>
    <script src="config.bricks.js" defer></script>
    <script type="application/ld+json" id="ld-schema"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß±</text></svg>">
    
    <style>
        :root {
            /* –Ø–∫—â–æ JS –Ω–µ —Å–ø—Ä–∞—Ü—é—î, –∑–º—ñ–Ω–Ω—ñ –≤—ñ–∑—å–º—É—Ç—å –¥—Ä—É–≥–µ –∑–Ω–∞—á–µ–Ω–Ω—è (–ø—ñ—Å–ª—è –∫–æ–º–∏) */
            --primary: var(--c-p, #e3000b);
            --secondary: var(--c-s, #ffdd00);
            --bg: var(--c-b, #f4f4f4);
            --text: var(--c-t, #111111);
            --radius: var(--u-r, 16px);
            --border: var(--u-b, 3px solid #111111);
            --shadow: var(--u-s, 0 5px 0 #111111);
        }
        body { font-family: system-ui, sans-serif; margin: 0; background: var(--bg); color: var(--text); }
        nav { background: #1a1a1a; padding: 12px 25px; display: flex; justify-content: space-between; align-items: center; border-bottom: var(--border); }
        nav a { color: white; font-weight: bold; text-decoration: none; }
        .lang-switch button { background: #333; color: white; border: 1px solid #444; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-left: 5px; }
        
        main { max-width: 420px; margin: 40px auto; background: white; padding: 30px; border-radius: var(--radius); border: var(--border); box-shadow: var(--shadow); text-align: center; }
        .modes { display: flex; gap: 8px; margin-bottom: 20px; }
        .mode-btn { flex: 1; padding: 10px; border: var(--border); border-radius: 10px; cursor: pointer; font-weight: 800; background: white; }
        .mode-btn.active { background: var(--secondary); transform: translateY(2px); }
        
        input { width: 100%; box-sizing: border-box; padding: 15px; border: var(--border); border-radius: 10px; font-size: 2rem; text-align: center; font-weight: 900; margin-bottom: 15px; }
        .result-box { background: #111; color: white; padding: 25px; border-radius: 12px; border: var(--border); }
        .result { font-size: 3.5rem; font-weight: 900; color: var(--secondary); display: block; }
        
        .btn-copy { background: var(--secondary); border: var(--border); padding: 12px; border-radius: 8px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 15px; box-shadow: 0 3px 0 #111; }
        .btn-support { display: inline-block; margin-top: 20px; padding: 12px 20px; border: var(--border); border-radius: 10px; text-decoration: none; color: #111; font-weight: bold; background: white; box-shadow: 0 3px 0 #111; }
        
        footer { margin-top: 40px; text-align: center; font-size: 0.9rem; }
        .idea-link { color: var(--primary); text-decoration: none; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<nav>
    <a href="/" id="back">Bricks-Repo Hub</a>
    <div id="lang-selectors" class="lang-switch"></div>
</nav>

<main>
    <h1 id="t_title">Weight to Pieces</h1>
    <div class="modes">
        <button class="mode-btn active" onclick="setMode(1.5, this)" id="m_mix">Mixed</button>
        <button class="mode-btn" onclick="setMode(2.0, this)" id="m_tech">Technic</button>
        <button class="mode-btn" onclick="setMode(0.6, this)" id="m_small">Small</button>
    </div>

    <input type="number" id="weight" placeholder="0" oninput="calculate()" inputmode="decimal">
    
    <section class="result-box">
        <span class="result" id="res">0</span>
        <span id="t_pieces">ESTIMATED PIECES</span>
        <div id="report-container" style="display:none; margin-top:15px; text-align:left; font-family:monospace; font-size:0.8rem;">
            <div id="report_text"></div>
            <button class="btn-copy" onclick="copyResult()"><span id="copy">Copy</span></button>
        </div>
    </section>

    <a href="#" id="support" class="btn-support">Support Project</a>

    <footer>
        <div id="f_idea">
            <span id="f_idea_q">Idea?</span> 
            <a class="idea-link" onclick="sendEmail()"><span id="f_idea_a">Write to us</span></a>
        </div>
        <p id="f_copy" style="font-size:0.7rem; color:#888; margin-top:15px;">¬© 2026 BRICKS-REPO</p>
    </footer>
</main>

<script>
    let currentRatio = 1.5;
    const toolID = "weight-to-bricks";

    // –ê–≤–∞—Ä—ñ–π–Ω–∏–π –∑–∞–ø–∞—Å –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é
    const fallback = {
        back: "Bricks-Repo Hub", support: "Support Project", copy: "Copy", copied: "Copied!",
        f_idea_q: "Idea? ", f_idea_a: "Write to us",
        t_title: "Convert LEGO Bricks Weight to Pieces", t_pieces: "ESTIMATED PIECES",
        m_mix: "Mixed Bricks", m_tech: "Technic Parts", m_small: "Small Parts",
        report: "üìä LEGO Report:\nWeight: {w}g\nEst: ~{p} pcs.\n{u}"
    };

    const tool_ua = {
        back: "Bricks-Repo –•–∞–±", support: "–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç", copy: "–ö–æ–ø—ñ—é–≤–∞—Ç–∏", copied: "–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!",
        f_idea_q: "–Ü–¥–µ—è? ", f_idea_a: "–ù–∞–ø–∏—à—ñ—Ç—å –Ω–∞–º",
        t_title: "–í–∞–≥–∞ –¥–µ—Ç–∞–ª–µ–π LEGO –≤ –∫—ñ–ª—å–∫—ñ—Å—Ç—å", t_pieces: "–ü–†–ò–ë–õ–ò–ó–ù–ê –ö–Ü–õ–¨–ö–Ü–°–¢–¨",
        m_mix: "–°—É–º—ñ—à –¥–µ—Ç–∞–ª–µ–π", m_tech: "Technic –¥–µ—Ç–∞–ª—ñ", m_small: "–î—Ä—ñ–±–Ω—ñ –¥–µ—Ç–∞–ª—ñ",
        report: "üìä LEGO –ó–≤—ñ—Ç:\n–í–∞–≥–∞: {w}–≥\n–ö-—Å—Ç—å: ~{p} —à—Ç.\n{u}"
    };

    function applyConfig() {
        const hasC = typeof CONFIG !== 'undefined';
        const root = document.documentElement.style;

        if (hasC) {
            root.setProperty('--c-p', CONFIG.style.colors.primary);
            root.setProperty('--c-s', CONFIG.style.colors.secondary);
            root.setProperty('--c-b', CONFIG.style.colors.bg);
            root.setProperty('--c-t', CONFIG.style.colors.text);
            root.setProperty('--u-r', CONFIG.style.ui.radius);
            root.setProperty('--u-b', CONFIG.style.ui.border);
            root.setProperty('--u-s', CONFIG.style.ui.shadow);
            
            document.getElementById('back').href = CONFIG.hub_url;
            document.getElementById('support').href = CONFIG.urls.support;
        }

        const langs = hasC ? Object.keys(CONFIG.common_i18n) : ['en', 'ua'];
        document.getElementById('lang-selectors').innerHTML = langs.map(l => 
            `<button onclick="changeLang('${l}')">${l.toUpperCase()}</button>`
        ).join('');
    }

    function changeLang(l) {
        localStorage.setItem('bricks_lang', l);
        const hasC = typeof CONFIG !== 'undefined';
        
        // –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: CONFIG -> UA (—è–∫—â–æ –≤–∏–±—Ä–∞–Ω–æ) -> Fallback (EN)
        let langData = (l === 'ua') ? tool_ua : fallback;
        if (hasC && CONFIG.common_i18n[l]) {
            langData = { ...langData, ...CONFIG.common_i18n[l] };
        }

        Object.keys(langData).forEach(key => {
            const el = document.getElementById(key);
            if (el) el.innerText = langData[key];
        });

        document.title = langData.t_title + (hasC ? CONFIG.seo.title_suffix : " | Bricks-Repo");
        calculate();
    }

    function calculate() {
        const w = document.getElementById('weight').value;
        const l = localStorage.getItem('bricks_lang') || 'en';
        const res = document.getElementById('res'), rep = document.getElementById('report-container');
        const langData = (l === 'ua') ? tool_ua : fallback;

        if (w > 0) {
            const p = Math.round(w / currentRatio);
            res.innerText = p.toLocaleString();
            const url = (typeof CONFIG !== 'undefined') ? CONFIG.hub_url : window.location.origin;
            document.getElementById('report_text').innerText = langData.report.replace('{w}', w).replace('{p}', p).replace('{u}', url);
            rep.style.display = 'block';
        } else { res.innerText = "0"; rep.style.display = 'none'; }
    }

    function sendEmail() {
        const email = (typeof CONFIG !== 'undefined') ? CONFIG.ideas_email : 'myprofitrepo+idea+bricks@gmail.com';
        window.location = "mailto:" + email + "?subject=" + encodeURIComponent('Idea: ' + toolID);
    }

    function setMode(r, btn) {
        currentRatio = r;
        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        calculate();
    }

    function copyResult() {
        const text = document.getElementById('report_text').innerText;
        const l = localStorage.getItem('bricks_lang') || 'en';
        const btnSpan = document.querySelector('#copy');
        const originalText = btnSpan.innerText;
        navigator.clipboard.writeText(text).then(() => {
            btnSpan.innerText = (l === 'ua') ? tool_ua.copied : fallback.copied;
            setTimeout(() => btnSpan.innerText = originalText, 2000);
        });
    }

    document.addEventListener('DOMContentLoaded', () => { applyConfig(); changeLang(localStorage.getItem('bricks_lang') || 'en'); });
</script>
</body>
</html>